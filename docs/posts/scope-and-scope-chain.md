---
title: JavaScript作用域与作用域链
date: 2021-08-02
sidebar_position: 2
---

## 作用域

作用域是指程序源代码中定义变量的区域。

作用域规定了如何查找变量，也就是确定当前执行代码对变量的访问权限。

JavaScript 采用词法作用域(lexical scoping)，也就是静态作用域。

### 静态作用域与动态作用域

因为 JavaScript 采用的是词法作用域，函数的作用域在函数定义的时候就决定了。

而与词法作用域相对的是动态作用域，函数的作用域是在函数调用的时候才决定的。

```js
var value = 1;

function foo() {
  console.log(value);
}

function bar() {
  var value = 2;
  foo();
}

bar();
```

执行 `foo` 函数，先从 `foo` 函数内部查找是否有局部变量 `value` ，如果没有，就根据书写的位置，查找上面一层的代码，也就是 `value` 等于 1，所以结果会打印 `1`.

### 全局作用域&函数作用域

- 在 `Web` 浏览器中，全局执行环境被认为是 `window` 对象，因此所有全局变量和函数都是作为 `window` 对象的属性和方法创建的。
- 在 `node.js` 环境中，全局执行环境是 `global` 对象。

## 作用域链

当代码在一个环境中执行时，会创建变量对象的一个作用域链（作用域形成的链条）

当在内部函数中，需要访问一个变量的时候，首先会访问函数本身的变量对象，是否有这个变量，如果没有，那么会继续沿作用域链往上查找，直到全局作用域。如果在某个变量对象中找到则使用该变量对象中的变量值。

由于变量的查找是沿着作用域链来实现的，所以也称作用域链为 `变量查找的机制` 。
